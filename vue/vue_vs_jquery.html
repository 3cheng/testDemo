<!DOCTYPE html>
<html>
    <head>
      <meta name="renderer" content="webkit">
      <meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"/>
      <meta charset="utf-8">
      <title>
        vue vs jquery
      </title>
      <link rel="stylesheet" type="text/css" href="../common.css"/>
      <link rel="stylesheet" type="text/css" href="../reset.css"/>
      <style>
        body{ background: #f9f9f9; color: #666; }
        .tc{ text-align: center; }
        .c_b{ zoom:1; }
        .pb15, .inputbg{ padding-bottom: 15px; }
        .pb40{ padding-bottom:40px; }
        .c_b:before, .c_b:after{ content: ""; display: block; }
        .cb:after{ clear:both; }
        .layout{ width:960px; margin:0 auto; }
        .n-frame{ border: 1px solid #e6e6e6; background: #fff; padding: 34px 34px 0; border-radius: 10px; min-height: 400px; _height: 400px; }
        .title-item{ padding-bottom: 10px; border-bottom: 1px solid #e6e6e6; margin-bottom: 20px; clear: both; }
        .dis_bot35{ padding-bottom: 35px; }
        .title-big, .title-biger{ font-size: 16px; color: #333; line-height: 1.5; font-weight: bold; }
        .title-big{ font-size:18px; }
        .device-frame .title-item{ margin-bottom: 0; }
        .mauto, .regbox{ margin:0 auto; }
        .regbox{ width: 332px; padding: 30px 0; line-height: 20px; }
        .listwrap{ margin-bottom: 15px; position: relative; }
        div#reg-phone-select-cty{ height: 40px; padding-left: 14px; line-height: 40px; display: inline-block; vertical-align: middle; border: 1px solid #e8e8e8; -o-border-radius: 4px; border-radius: 4px; color: #555; cursor: pointer; }
        .tits tt{ float: left; width: 275px; border-right: 1px solid #e8e8e8; cursor: pointer; }
        .icon_cirarr{ float: right; background: url(../images/icon_user.png); width: 16px; height: 16px; margin: 11px 12px 0 12px; }
        .labelbox{ height: 40px; line-height: 40px; display: inline-block; }
        .labelbox input{ height: 20px; line-height: 20px; padding: 10px; display: inline-block; }
        .inputbg input{ width: 310px; height: 20px; line-height: 20px; }
        .labelbox, .tits_list, .borderbox{   border: 1px solid #e8e8e8; -o-border-radius: 4px; border-radius: 4px; }
        .inputcode .code{ width:170px; }
        .chkcode_img{ margin-left: 7px; vertical-align: middle; cursor: pointer; }
        .btn332{ width: 330px; height: 42px; margin: 0 auto; line-height: 42px; text-align: center; font-size: 14px; display: block; cursor: pointer; border: 1px solid #e8e8e8; -o-border-radius: 4px; border-radius: 4px; }
        .btn_reg_1{ background-color: #ff6f3d; margin-top: 15px; border: 1px solid rgba(186,186,186,0.3); color: #fff; }
        .btn_reg_1:hover{ background: #ff936a; }
        .btn_reg_2{ background: #fff; margin-top: 10px; border: 1px solid #ddd;color: #7c7c7c; }
        .btn_reg_2:hover{ color: #333; }
        .step2{ padding-top:20px; }
        .step2 .step2_txt{ padding-bottom: 10px; }
        .step2 .step2_txt p{ padding-bottom: 10px; }
        .inputcode .resendcode{ width: 190px; width: 185px\9; max-width: 260px; }
        .remain{ margin-left: 8px; vertical-align: middle; display: inline-block; height: 40px; line-height: 40px; border: 1px solid #e8e8e8; -o-border-radius: 4px; border-radius: 4px; }
        .remain a{ color: #000; cursor: pointer; padding: 0px 10px; display: block; }
        .remain a:hover{ background: #ececec !important; color: #888; }
        .regagabox{ padding-bottom:30px; }
        .confirm_box{ padding-bottom: 10px; font-size: 14px;color: #333; }
        .single_imgarea{ text-align: center; }
        .marauto{ margin:0 auto;}
        .cursor_d{ cursor: default; }
        .na-img-area{ width: 80px; height: 80px; border: 2px solid #e3e3e3; border-radius: 50%; padding: 4px; background: #fff; position: relative; z-index: 4; cursor: pointer; }
        .na-img-bg-area{ background: url(../images/n-avator-bg.png) 0 0 no-repeat; width: 100%; height: 100%; border-radius: 50%; overflow: hidden; }
        .single_imgarea .us_name{ padding-top:10px; }
        .step3 dt{ margin:15px 0px; }
        .n_succ img{ margin:58px 0 14px; }
        .n_succ .fixed_bot{ margin: 45px auto 30px; }

        .demo-panel h1{ font-size:18px; margin:10px; }

        /*注册流程1： 1.1版本 */
        .process-regs{ margin:10px 10px auto; width:80%; padding:10px; color:#fff; text-align:center; line-height: 100px; }
        .process-reg{ float:left; width:150px; height:100px; margin:10px 10px; background-color:#ccc; }
        .process-reg.active{ background-color:#FF6F3D; }
        .btn-radius{ border-radius: 5px; cursor:pointer; padding:5px; margin: 5px; background-color: #eee; }
        .btn-radius:hover{ background-color:#ddd; }
        .btn-radius.active{ display: block; }
        .fix{ *zoom:1; }
        .fix:after,.fix:before{ display:block; content:"clear"; height:0; clear:both; overflow:hidden; visibility:hidden; }
        
        /*购物列表2*/
        .buy-list{ font-size:14px; margin:10px 20px; width:450px; height:400px; border:1px solid #ccc; }
        .buy-list fieldset{ font-size:16px; border-bottom:1px solid #ccc; }
        .buy-list legend{ padding:10px; }
        .buy-list ul{ margin-bottom:40px; padding:20px; }
        .buy-list li{ margin:15px 0px; height:30px; }
        .buy-list .buy-list-f{ float:right; margin:0px 20px; width:150px; }
        .buy-list-f .good-total{ float:left; margin:20px; color:red; }
        .buy-list .good-label{ margin:0px 20px; }
        .buy-list .good-set{ float:right; }
        .good-set .set-min,
        .good-set .set-count,
        .good-set .set-add{ padding:5px; float:left; }
        .good-set .set-min{ border:1px solid #ccc; border-right:0px; }
        .good-set .set-count{ border:1px solid #ccc; width:5em; text-align:center; }
        .good-set .set-add{ border:1px solid #ccc; border-left:0px; }
        
        .buy-list .confirm-list-f{ margin:0px 20px; }
        .confirm-list-f .btn-l{ float:left; }
        .confirm-list-f .btn-r{ float:right; }
        .buy-list .con-l-label{ margin-right: 40px; }
        .buy-list .con-l-count{ font-size:16px; font-weight: bold; }

      </style>
    </head>

    <body> 
      <div class="btn-list">
        <button class="radius-btn" v-on="click: showType = 1">注册流程</button>
        <button class="radius-btn" v-on="click: showType = 1.1">注册流程1.1</button>
        <button class="radius-btn" v-on="click: showType = 2">购物列表</button>
        <button class="radius-btn" v-on="click: showType = 3">提交表单</button>
      </div>

      <div class="demo-panel" v-show="showType == 1">
        <h1 class="register-demo">1.注册流程</h1>
        <!-- 注册流程 -->
        <div class="layout">
          <div class="n-frame">
            <div class="title-item dis_bot35 t_c">
              <h4 class="title-big">注册账号</h4>
            </div>
            <div>
              <!-- 步骤1 -->
              <div class="regbox" v-show="demo1.step == 1">
                <div class="phone_step1">
                  <div class="listwrap" id="select-cycode">
                    <div class="listtit" id="reg-phone-select-cty">
                      <span class="tits dis_box c_b">
                        <tt id="select-cycode-result">中国+86</tt>
                        <i class="icon_cirarr"></i>
                      </span>
                    </div>
                    <div></div>
                  </div>
                  <div class="inputbg pb15">
                    <label class="labelbox" for>
                      <input type="tel" name="phone" value="135XXXXXXXX" data-type="PH" placeholder="请输入手机号码">
                    </label>
                  </div>
                  <div class="inputbg inputcode dis_box">
                    <label class="labelbox">
                      <input class="code" type="text" name="icode" value="vc6qu3" autocomplete="off" placeholder="图片验证码">
                    </label>
                    <img alt="图片验证码" title="看不清换一张" class="chkcode_img" src="../images/miCode.jpg">
                  </div>
                  <div>
                    <input class="btn332 btn_reg_1" id="submit-step" data-to="phone-step2" type="submit" value="立即注册" v-on="click: demo1.step = 2">
                  </div>
                </div>
              </div>
              <!-- 步骤2 -->
              <div class="regbox" v-show="demo1.step == 2">
                <div class="step2 phone_step2">
                  <div class="step2_txt">
                    <p>我们已经发送一条验证短信至 <span class="address-place">+852 135XXXXXXXX</span></p>
                    <p>请输入短信中的验证码</p>
                  </div>
                  <div class="inputbg inputcode dis_box">
                    <label class="labelbox wap_resend_label">
                      <input class="resendcode" type="text" placeholder="请输入验证码" value="3344" name="ticket">
                    </label>   
                    <span class="remain"><a class="color333 send-status" href="javascript:void(0)">重新发送</a></span>
                  </div>
                  <div class="fixed_bot mar_phone_dis2">
                    <input class="btn332 btn_reg_1  submit-step" type="submit" value="下一步" v-on="click: demo1.step = 3" />
                    <input class="btn332 btn_reg_2  change-view" data-to="phone-step1" type="button" value="返回" v-on="click:demo1.step = 1" />
                  </div>
                </div>
              </div>
              <!-- 步骤3 -->
              <div class="regbox" v-show="demo1.step == 3">
                <div class="regagabox phone-confirm">
                  <div class="confirm_box">
                    <div class="single_imgarea">
                      <div class="na-img-area marauto cursor_d">
                        <div class="na-img-bg-area us-portraitUrl"></div>
                      </div>
                      <p class="us_name us-userName">xxdxxdx</p>
                      <p class="us_id us-userId">277XX55</p>
                    </div>
                    <div class="pt10 pb40 t_c">这个小米帐号是你的吗？</div>
                  </div>
                  <div class="fixed_bot">
                    <a class="btn332 btn_reg_2 submit-token-login" href="javascrip:void(0);" v-on="click: demo1.step = 6">是我的，直接登录</a>
                    <input class="btn332 btn_reg_2  change-view" data-to="phone-step3" data-source="tokenRegister" type="button" value="不是我的，注册新帐号" v-on="click:demo1.step = 4" />
                  </div>
                </div>
              </div>
              <!-- 步骤4 -->
              <div class="regbox" v-show="demo1.step == 4">
                <div class="step3 phone_step3">
                  <dl>
                    <dt>
                      <h4>
                        您注册的手机号为<span class="register-ph-num">13535XXXXXXX</span>
                      </h4>
                      <h4>请设置您的密码：</h4>
                    </dt>
                    <dd>
                      <div class="inputbg">
                        <label class="labelbox" for="">
                          <input class="set-password" type="password" data-error=".error-password" name="password" placeholder="请输入密码" value="123" />
                        </label>
                      </div>
                    </dd>
                    <dd>
                      <div class="inputbg">
                        <label class="labelbox" for="">
                          <input name="repassword" type="password" data-repeat=".set-password" data-error=".error-password" placeholder="请输入确认密码" value="123"/>
                        </label>
                      </div>
                    </dd>
                  </dl>
                  <div class="fixed_bot mar_phone_dis3">
                    <input class="btn332 btn_reg_1 submit-step" type="submit" value="提交" v-on="click: demo1.step = 5" />
                  </div>
                </div>
              </div>
              <!-- 步骤5 -->
              <div class="regbox" v-show="demo1.step == 5">
                <div class="phone_step4">
                  <div class="t_c n_succ">
                    <img class="dis_none" width="68" height="68" src="../images/succ.jpg" alt="">
                    <h4>注册成功! </h4>
                    <div class="fixed_bot mar_phone_dis4">
                      <a class="btn332 btn_reg_1 login-redirect" v-on="click:demo1.step=6" href="javascript:void(0);">
                        登录
                      </a>
                    </div>
                  </div>  
                </div>
              </div>
              <!-- 步骤6 -->
              <div class="regbox" v-show="demo1.step == 6">
                <div class="phone_step4">
                  <div class="t_c n_succ">
                    <img class="dis_none" width="68" height="68" src="../images/succ.jpg" alt="">
                    <h4>登陆成功! </h4>
                    <div class="fixed_bot mar_phone_dis4">
                      <a class="btn332 btn_reg_1 login-redirect" v-on="click:demo1.step=1" href="javascript:void(0);">
                        返回注册
                      </a>
                    </div>
                  </div>  
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>

      <div class="demo-panel" v-show="showType == 1.1" id="regDemo" >
        <h1>购物流程：博文简单版本, 灰常粗糙！</h1>
        <div class="process-regs fix">
          <div class="process-reg" id="proReg1" v-class="active: demo1.regStep == 1">填写手机号</div>
          <div class="process-reg" id="proReg2" v-class="active: demo1.regStep == 2">输入验证码</div>
          <div class="process-reg" id="proReg3" v-class="active: demo1.regStep == 3">设置密码</div>
          <div class="process-reg" id="proReg4" v-class="active: demo1.regStep == 4">立即注册</div>
        </div>

        <div class="btn-list">
          <button class="btn-radius" id="stepBtn1" v-on="click: demo1.regStep = 2" v-show="demo1.regStep == 1">提交手机号</button>
          <button class="btn-radius" id="stepBtn2" v-on="click: demo1.regStep = 3" v-show="demo1.regStep == 2">提交验证码</button>
          <button class="btn-radius" id="stepBtn3" v-on="click: demo1.regStep = 4" v-show="demo1.regStep == 3">提交密码</button>
          <button class="btn-radius" id="stepBtn4" v-on="click: demo1.regStep = 1" v-show="demo1.regStep == 4">确认注册成功</button>
        </div>

      </div>

      <div class="demo-panel" v-show="showType == 2">
        <h1 class="buy-list-demo">2.购物列表</h1>

        <form class="buy-list" id="buyStep1">
          <fieldset>
            <legend>购物车列表</legend>
          </fieldset>

          <ul>
            <li data-price="45">
              <input type="checkbox" name="good1" />
              <label class="good-label">商品1</label>
              <label>45元</label>
              <div class="good-set">
                <a href="javascript:void(0);" class="set-min">&nbsp;</a>
                <input type="text" class="set-count" value="1" />
                <a href="javascript:void(0);" class="set-add">+</a>
              </div>
            </li>
            <li data-price="56">
              <input type="checkbox" name="good2" />
              <label class="good-label">商品2</label>
              <label>56元</label>
              <div class="good-set">
                <a href="javascript:void(0);" class="set-min">&nbsp;</a>
                <input type="text" class="set-count" value="1" />
                <a href="javascript:void(0);" class="set-add">+</a>
              </div>
            </li>
            <li data-price="30">
              <input type="checkbox" name="good3" />
              <label class="good-label">商品3</label>
              <label>30元</label>
              <div class="good-set">
                <a href="javascript:void(0);" class="set-min">&nbsp;</a>
                <input type="text" class="set-count" value="1" />
                <a href="javascript:void(0);" class="set-add">+</a>
              </div>
            </li>
          </ul>

           <div class="buy-list-f">
              <div class="good-total">131.00</div>
              <button class="radius-btn">去支付</button>
          </div>  
        </form>

        <form class="buy-list" id="buyStep2">
          <fieldset>
            <legend>确认订单</legend>
          </fieldset>

          <ul>
            <li>
              <span class="con-l-label">商品2</span> X <span class="con-l-count">3</span>
            </li>
            <li>
              <span class="con-l-label">商品3</span> X <span class="con-l-count">2</span>
            </li>

          </ul>

           <div class="confirm-list-f">
              <button class="radius-btn btn-l">返回</button>
              <button class="radius-btn btn-r">提交订单</button>
          </div>  
        </form>

      </div>

      <div class="demo-panel" v-show="showType == 3">
        <h1 class="form-demo">3.提交表单</h1>
        
      </div>

      <script type="text/javascript" src="./vue.js"></script>
      <script type="text/javascript" src="../lib/jquery-1.10.2.min.js"></script>

      <script type="text/javascript">
        // 全局变量
        var xq = {};

        init();

        function init() {
          var vm = null;
          vm = new Vue({
            el: 'body',
            data: {
              showType: 2,
              demo1: {
                'step': 1,
                'regStep': 1
              },
              demo2: {

              },
              demo3: {

              }
            },
            methods: {

            }
          });

          xq.vm = vm;
        }

        // jquery 代码
        $(function(){

          // 注册相关 代码
          // registInit();
          
          // 购买列表相关代码
          buyListInit(); 

          function registInit(){
            var $regDemo = $('#regDemo'),
                $stepBtn1 = $regDemo.find('#stepBtn1'),
                $stepBtn2 = $regDemo.find('#stepBtn2'),
                $stepBtn3 = $regDemo.find('#stepBtn3'),
                $stepBtn4 = $regDemo.find('#stepBtn4');

            $stepBtn1.on('click', submitMobile);
            $stepBtn2.on('click', submitAuthCode);
            $stepBtn3.on('click', submitPas);
            $stepBtn4.on('click', submitReg);

            // $stepBtn1.on('click', commonSubmit);
            // $stepBtn2.on('click', commonSubmit);
            // $stepBtn3.on('click', commonSubmit);
            // $stepBtn4.on('click', commonSubmit);

            function submitMobile() {
              $regDemo.find('.process-reg').removeClass('active');
              $regDemo.find('#proReg2').addClass('active');
              $stepBtn1.hide();
              $stepBtn2.show();
            }
            function submitAuthCode() {
              $regDemo.find('.process-reg').removeClass('active');
              $regDemo.find('#proReg3').addClass('active');
              $stepBtn2.hide();
              $stepBtn3.show();
            }
            function submitPas() {
              $regDemo.find('.process-reg').removeClass('active');
              $regDemo.find('#proReg4').addClass('active');
              $stepBtn3.hide();
              $stepBtn4.show();
            }
            function submitReg() {
              $regDemo.find('.process-reg').removeClass('active');
              $regDemo.find('#proReg1').addClass('active');
              $stepBtn4.hide();
              $stepBtn1.show();
            }

            // 如果只是当前功能一个函数也能搞定
            function commonSubmit(){
              var $this = $(this), btn_index;

              $regDemo.find('.process-reg').removeClass('active');
              btn_index = $this.index() + 2;
              if ( btn_index > 4 ) {
                btn_index = 1;
              }
              $regDemo.find('#proReg' + btn_index).addClass('active');

              $this.hide();
              if ( $this.next('.btn-radius').length > 0 ) {
                $this.next('.btn-radius').show();
              } else {
                $regDemo.find('.btn-radius:first').show();
              }
            }
          }

          function buyListInit(){
            var $buyList = $('.buy-list'),
                $buyStep1 = $('#buyStep1');

            $buyList.last().hide();
            $buyStep1.find('.set-add').on('click', addGoodCount);
            $buyStep1.find('.set-min').on('click', minGoodCount);

            function addGoodCount(e){
              var $this = $(this),
                  $input = $this.prev('input'),
                  $li = $this.parents('li'),
                  $minBtn = $this.siblings('.set-min');

              var inputVal = parseInt($input.val(), 10);
              inputVal++;

              if ( inputVal > 1 ){
                $minBtn.html('-');
              }
              $input.val(inputVal);
              // 更新总价格
              refreshPrice();
            }

            function minGoodCount(e){
              var $this = $(this),
                  $input = $this.next('input'),
                  $li = $this.parents('li'),
                  $addBtn = $this.siblings('.set-add');

              var inputVal = parseInt($input.val(), 10);
              if (inputVal <= 1) {
                return false;
              }
              inputVal--;
              if (inputVal <= 1) {
                $this.html('&nbsp;');
              }
              $input.val(inputVal);
              // 更新总价格
              refreshPrice();
            }

            function refreshPrice(){
              var totalPrice = 0.00,
                  $ul = $buyStep1.find('ul');

              $ul.find('li').each(function(i, n){
                var $li = $(n),
                    price = parseFloat( $li.attr('data-price') ),
                    count = parseInt( $li.find('.set-count').val(), 10 );

                totalPrice += price * count;
                $buyStep1.find('.good-total').text( totalPrice.toFixed(2) );
              });

            }

          }

        });
      </script>
    </body>
</html>